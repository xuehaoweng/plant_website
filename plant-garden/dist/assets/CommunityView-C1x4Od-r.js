import{d as R,r as c,m as L,q as W,c as u,a as t,b as s,u as p,s as X,e as l,w as n,F as f,f as y,o as i,g as d,x as Y,l as z,n as T,t as r,y as Z,p as ee,j as te,_ as se}from"./index-kxaFLv-e.js";const ae={class:"community-page"},ne={class:"main-content"},oe={class:"posts-section"},le={class:"posts-header"},ie={class:"posts-list"},re={class:"post-header"},ue={class:"author-info"},ce={class:"author-details"},de={class:"author-name"},_e={class:"post-time"},pe={class:"post-title"},me={class:"post-content"},ge={key:0,class:"post-images"},ve={class:"post-footer"},he={class:"post-actions"},fe={class:"pagination"},ye={class:"sidebar"},Ce={class:"topics-list"},we={class:"topic-title"},ke={class:"topic-count"},xe={class:"users-list"},ze={class:"user-name"},Se={class:"user-posts"},je=R({__name:"CommunityView",setup(Ve){const m=c(""),g=c(1),C=c(10),w=c({id:1,name:"当前用户",avatar:"/images/avatars/user1.jpg"}),N=c([{id:1,title:"我的绿萝养护经验分享",content:"经过一年的养护，我的绿萝长得非常茂盛，分享一下我的养护经验...",author:{id:1,name:"园艺达人",avatar:"/images/avatars/user1.jpg"},time:"2024-01-15 14:30",likes:128,comments:32,tag:"experience",images:["/images/posts/luluo1.jpg","/images/posts/luluo2.jpg"]},{id:2,title:"求助：多肉植物叶子发软怎么办？",content:"最近发现我的多肉植物叶子开始发软，不知道是什么原因，求大神指点...",author:{id:2,name:"多肉爱好者",avatar:"/images/avatars/user2.jpg"},time:"2024-01-14 09:15",likes:45,comments:28,tag:"question"}]),P=c([{id:1,title:"室内植物养护技巧",count:156},{id:2,title:"多肉植物繁殖方法",count:98},{id:3,title:"植物病虫害防治",count:87}]),U=c([{id:1,name:"园艺达人",avatar:"/images/avatars/user1.jpg",posts:128},{id:2,name:"多肉爱好者",avatar:"/images/avatars/user2.jpg",posts:95},{id:3,name:"植物医生",avatar:"/images/avatars/user3.jpg",posts:76}]),S=L(()=>N.value.filter(o=>o.title.toLowerCase().includes(m.value.toLowerCase())||o.content.toLowerCase().includes(m.value.toLowerCase()))),q=L(()=>S.value.length),B=o=>({experience:"success",question:"warning",share:"info"})[o]||"info",D=o=>({experience:"经验分享",question:"求助",share:"分享"})[o]||"其他",j=W(),I=o=>{o.likes++,j.addTransaction(w.value.id,"earn",1,"post","帖子获得点赞",new Date().toISOString())},F=o=>{o.comments++,j.addTransaction(w.value.id,"earn",5,"post","发表评论",new Date().toISOString())},O=()=>{},$=o=>{C.value=o,g.value=1},E=o=>{g.value=o};return(o,a)=>{const Q=l("el-input"),v=l("el-icon"),h=l("el-button"),V=l("el-avatar"),k=l("el-dropdown-item"),A=l("el-dropdown-menu"),G=l("el-dropdown"),H=l("el-image"),J=l("el-tag"),x=l("el-card"),K=l("el-pagination");return i(),u("div",ae,[a[9]||(a[9]=t("div",{class:"page-header"},[t("h1",null,"社区交流"),t("p",null,"与园艺爱好者分享经验，解答疑惑")],-1)),t("div",ne,[t("div",oe,[t("div",le,[s(Q,{modelValue:m.value,"onUpdate:modelValue":a[0]||(a[0]=e=>m.value=e),placeholder:"搜索帖子...",class:"search-input","prefix-icon":p(X)},null,8,["modelValue","prefix-icon"]),s(h,{type:"primary",onClick:O},{default:n(()=>[s(v,null,{default:n(()=>[s(p(Y))]),_:1}),a[3]||(a[3]=d(" 发布新帖 "))]),_:1,__:[3]})]),t("div",ie,[(i(!0),u(f,null,y(S.value,e=>(i(),z(x,{key:e.id,class:"post-card"},{default:n(()=>{var b;return[t("div",re,[t("div",ue,[s(V,{size:40,src:e.author.avatar},null,8,["src"]),t("div",ce,[t("span",de,r(e.author.name),1),t("span",_e,r(e.time),1)])]),s(G,null,{dropdown:n(()=>[s(A,null,{default:n(()=>{var _;return[s(k,null,{default:n(()=>a[4]||(a[4]=[d("收藏")])),_:1,__:[4]}),s(k,null,{default:n(()=>a[5]||(a[5]=[d("分享")])),_:1,__:[5]}),e.author.id===((_=w.value)==null?void 0:_.id)?(i(),z(k,{key:0},{default:n(()=>a[6]||(a[6]=[d("删除")])),_:1,__:[6]})):T("",!0)]}),_:2},1024)]),default:n(()=>[s(h,{type:"text"},{default:n(()=>[s(v,null,{default:n(()=>[s(p(Z))]),_:1})]),_:1})]),_:2},1024)]),t("h3",pe,r(e.title),1),t("p",me,r(e.content),1),(b=e.images)!=null&&b.length?(i(),u("div",ge,[(i(!0),u(f,null,y(e.images,(_,M)=>(i(),z(H,{key:M,src:_,"preview-src-list":e.images,fit:"cover",class:"post-image"},null,8,["src","preview-src-list"]))),128))])):T("",!0),t("div",ve,[t("div",he,[s(h,{type:"text",onClick:_=>I(e)},{default:n(()=>[s(v,null,{default:n(()=>[s(p(ee))]),_:1}),d(" "+r(e.likes),1)]),_:2},1032,["onClick"]),s(h,{type:"text",onClick:_=>F(e)},{default:n(()=>[s(v,null,{default:n(()=>[s(p(te))]),_:1}),d(" "+r(e.comments),1)]),_:2},1032,["onClick"])]),s(J,{size:"small",type:B(e.tag)},{default:n(()=>[d(r(D(e.tag)),1)]),_:2},1032,["type"])])]}),_:2},1024))),128))]),t("div",fe,[s(K,{"current-page":g.value,"onUpdate:currentPage":a[1]||(a[1]=e=>g.value=e),"page-size":C.value,"onUpdate:pageSize":a[2]||(a[2]=e=>C.value=e),"page-sizes":[10,20,30,50],total:q.value,layout:"total, sizes, prev, pager, next",onSizeChange:$,onCurrentChange:E},null,8,["current-page","page-size","total"])])]),t("div",ye,[s(x,{class:"hot-topics"},{header:n(()=>a[7]||(a[7]=[t("div",{class:"card-header"},[t("span",null,"热门话题")],-1)])),default:n(()=>[t("ul",Ce,[(i(!0),u(f,null,y(P.value,e=>(i(),u("li",{key:e.id},[t("span",we,r(e.title),1),t("span",ke,r(e.count)+" 讨论",1)]))),128))])]),_:1}),s(x,{class:"active-users"},{header:n(()=>a[8]||(a[8]=[t("div",{class:"card-header"},[t("span",null,"活跃用户")],-1)])),default:n(()=>[t("ul",xe,[(i(!0),u(f,null,y(U.value,e=>(i(),u("li",{key:e.id},[s(V,{size:32,src:e.avatar},null,8,["src"]),t("span",ze,r(e.name),1),t("span",Se,r(e.posts)+" 帖子",1)]))),128))])]),_:1})])])])}}}),Le=se(je,[["__scopeId","data-v-e70a8428"]]);export{Le as default};
