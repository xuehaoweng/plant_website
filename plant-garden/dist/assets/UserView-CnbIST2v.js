import{d as M,r as v,q as U,c,a as s,b as e,w as a,e as _,n as j,o as r,u as i,z as q,A as k,p as F,B as L,j as R,C as O,t as l,g as w,F as D,f as T,D as C,E as P,_ as G}from"./index-kxaFLv-e.js";const H={class:"user-page"},J={class:"main-content"},K={class:"nav-section"},Q={class:"content-section"},W={key:0,class:"profile-section"},X={class:"card-header"},Y={class:"profile-info"},Z={class:"user-details"},ss={class:"user-bio"},ts={class:"user-stats"},es={class:"stat-item"},as={class:"stat-value"},ns={class:"stat-item"},ls={class:"stat-value"},os={class:"stat-item"},is={class:"stat-value"},ds={key:1,class:"coins-section"},us={class:"card-header"},cs={class:"balance-info"},_s={class:"balance-details"},rs={class:"balance-amount"},vs={class:"balance-stats"},ps={class:"stat-item"},fs={class:"stat-value"},ms={class:"stat-item"},gs={class:"stat-value"},bs={class:"transactions-list"},ys={class:"transaction-info"},hs={class:"transaction-desc"},ks={class:"transaction-time"},ws={key:2,class:"other-sections"},Cs={class:"recharge-content"},Ss={class:"amount-options"},Vs=["onClick"],xs={class:"amount"},Ds={class:"coins"},Ts={class:"payment-methods"},$s={class:"method-options"},zs={class:"dialog-footer"},As=M({__name:"UserView",setup(Bs){const g=v("profile"),p=U(),f=v(!1),b=v(10),y=v("wechat"),V=[{value:10,coins:100},{value:50,coins:550},{value:100,coins:1200},{value:200,coins:2600},{value:500,coins:7e3},{value:1e3,coins:15e3}],d=v({id:1,name:"园艺达人",avatar:"/images/avatars/user1.jpg",bio:"热爱园艺，专注室内植物养护",coins:p.balance,posts:128,followers:256,following:64}),x=v([]);(()=>{x.value=p.getTransactions(d.value.id)})();const $=m=>{g.value=m},z=()=>{f.value=!0},A=()=>{var o;const m=b.value,t=((o=V.find(u=>u.value===m))==null?void 0:o.coins)||0;p.addTransaction(d.value.id,"earn",t,"system",`充值${m}元`,new Date().toISOString()),d.value.coins+=t,f.value=!1,P.success(`充值成功，获得${t}园艺币`)},B=()=>{};return(m,t)=>{const o=_("el-icon"),u=_("el-menu-item"),E=_("el-menu"),h=_("el-button"),N=_("el-avatar"),S=_("el-card"),I=_("el-dialog");return r(),c("div",H,[t[25]||(t[25]=s("div",{class:"page-header"},[s("h1",null,"个人中心")],-1)),s("div",J,[s("div",K,[e(E,{"default-active":g.value,class:"user-menu",onSelect:$},{default:a(()=>[e(u,{index:"profile"},{default:a(()=>[e(o,null,{default:a(()=>[e(i(q))]),_:1}),t[4]||(t[4]=s("span",null,"个人资料",-1))]),_:1,__:[4]}),e(u,{index:"coins"},{default:a(()=>[e(o,null,{default:a(()=>[e(i(k))]),_:1}),t[5]||(t[5]=s("span",null,"我的园艺币",-1))]),_:1,__:[5]}),e(u,{index:"favorites"},{default:a(()=>[e(o,null,{default:a(()=>[e(i(F))]),_:1}),t[6]||(t[6]=s("span",null,"我的收藏",-1))]),_:1,__:[6]}),e(u,{index:"posts"},{default:a(()=>[e(o,null,{default:a(()=>[e(i(L))]),_:1}),t[7]||(t[7]=s("span",null,"我的帖子",-1))]),_:1,__:[7]}),e(u,{index:"qa"},{default:a(()=>[e(o,null,{default:a(()=>[e(i(R))]),_:1}),t[8]||(t[8]=s("span",null,"我的问答",-1))]),_:1,__:[8]}),e(u,{index:"settings"},{default:a(()=>[e(o,null,{default:a(()=>[e(i(O))]),_:1}),t[9]||(t[9]=s("span",null,"账号设置",-1))]),_:1,__:[9]})]),_:1},8,["default-active"])]),s("div",Q,[g.value==="profile"?(r(),c("div",W,[e(S,null,{header:a(()=>[s("div",X,[t[11]||(t[11]=s("span",null,"个人资料",-1)),e(h,{type:"primary",onClick:B},{default:a(()=>t[10]||(t[10]=[w("编辑资料")])),_:1,__:[10]})])]),default:a(()=>[s("div",Y,[e(N,{size:100,src:d.value.avatar},null,8,["src"]),s("div",Z,[s("h2",null,l(d.value.name),1),s("p",ss,l(d.value.bio),1),s("div",ts,[s("div",es,[s("span",as,l(d.value.posts),1),t[12]||(t[12]=s("span",{class:"stat-label"},"帖子",-1))]),s("div",ns,[s("span",ls,l(d.value.followers),1),t[13]||(t[13]=s("span",{class:"stat-label"},"粉丝",-1))]),s("div",os,[s("span",is,l(d.value.following),1),t[14]||(t[14]=s("span",{class:"stat-label"},"关注",-1))])])])])]),_:1})])):j("",!0),g.value==="coins"?(r(),c("div",ds,[e(S,{class:"balance-card"},{header:a(()=>[s("div",us,[t[16]||(t[16]=s("span",null,"园艺币余额",-1)),e(h,{type:"primary",onClick:z},{default:a(()=>t[15]||(t[15]=[w("充值")])),_:1,__:[15]})])]),default:a(()=>[s("div",cs,[e(o,{size:"40",class:"coin-icon"},{default:a(()=>[e(i(k))]),_:1}),s("div",_s,[s("span",rs,l(d.value.coins),1),t[17]||(t[17]=s("span",{class:"balance-label"},"园艺币",-1))])]),s("div",vs,[s("div",ps,[t[18]||(t[18]=s("span",{class:"stat-label"},"总收入",-1)),s("span",fs,"+"+l(i(p).incomeStats),1)]),s("div",ms,[t[19]||(t[19]=s("span",{class:"stat-label"},"总支出",-1)),s("span",gs,"-"+l(i(p).expenseStats),1)])])]),_:1}),e(S,{class:"transactions-card"},{header:a(()=>t[20]||(t[20]=[s("div",{class:"card-header"},[s("span",null,"交易记录")],-1)])),default:a(()=>[s("div",bs,[(r(!0),c(D,null,T(x.value,n=>(r(),c("div",{key:n.id,class:"transaction-item"},[s("div",ys,[s("span",{class:C(["transaction-type",n.type])},l(n.type==="earn"?"+":"-")+l(n.amount),3),s("span",hs,l(n.description),1)]),s("span",ks,l(new Date(n.createdAt).toLocaleString()),1)]))),128))])]),_:1})])):(r(),c("div",ws))])]),e(I,{modelValue:f.value,"onUpdate:modelValue":t[3]||(t[3]=n=>f.value=n),title:"园艺币充值",width:"400px"},{footer:a(()=>[s("div",zs,[e(h,{onClick:t[2]||(t[2]=n=>f.value=!1)},{default:a(()=>t[24]||(t[24]=[w("取消")])),_:1,__:[24]}),e(h,{type:"primary",onClick:A},{default:a(()=>[w(" 确认支付 "+l(b.value)+"元 ",1)]),_:1})])]),default:a(()=>[s("div",Cs,[s("div",Ss,[(r(),c(D,null,T(V,n=>s("div",{key:n.value,class:C(["amount-option",{active:b.value===n.value}]),onClick:Ns=>b.value=n.value},[s("span",xs,l(n.value)+"元",1),s("span",Ds,l(n.coins)+"园艺币",1)],10,Vs)),64))]),s("div",Ts,[t[23]||(t[23]=s("div",{class:"method-title"},"选择支付方式",-1)),s("div",$s,[s("div",{class:C(["method-option",{active:y.value==="wechat"}]),onClick:t[0]||(t[0]=n=>y.value="wechat")},[e(o,null,{default:a(()=>[e(i(k))]),_:1}),t[21]||(t[21]=s("span",null,"微信支付",-1))],2),s("div",{class:C(["method-option",{active:y.value==="alipay"}]),onClick:t[1]||(t[1]=n=>y.value="alipay")},[e(o,null,{default:a(()=>[e(i(k))]),_:1}),t[22]||(t[22]=s("span",null,"支付宝",-1))],2)])])])]),_:1},8,["modelValue"])])}}}),Ms=G(As,[["__scopeId","data-v-717e07f7"]]);export{Ms as default};
